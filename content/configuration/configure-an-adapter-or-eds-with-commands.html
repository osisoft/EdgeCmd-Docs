<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Configure an adapter or EDS with commands </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Configure an adapter or EDS with commands ">
    <meta name="generator" content="docfx 2.56.5.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../index.html" width="46">
                <img id="logo" src="../../content/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="ConfigureAnAdapterOrEDSWithCommands">
<h1 id="configure-an-adapter-or-eds-with-commands">Configure an adapter or EDS with commands</h1>

<p>Use EdgeCmd utility to configure an adapter or EDS using only commands or by pointing to JSON files. For more information, see <a class="xref" href="configure-an-adapter-or-eds-with-json-files.html">Configure an adapter or EDS with JSON files</a>.</p>
<p><strong>Note:</strong> The examples in this topic use the default port number <code>5590</code>. If you specified a different port number for your adapter or EDS, you need to add it in the command. For example:</p>
<pre><code class="lang-cmd">edgecmd -port 5591 &lt;RestOfTheCommand&gt;
</code></pre><p><strong>Note:</strong> If a command contains slashes, you must add escape characters as follows:<br></p>
<ul>
<li><p>In <em>Windows</em>, add a second slash.<br> 
   Example: <code>TestUser\OilCompany</code> becomes <code>TestUser\\OilCompany</code></p>
</li>
<li><p>In <em>Linux</em>, add three slashes.<br>
   Example: <code>TestUser\OilCompany</code> becomes <code>TestUser\\\\OilCompany</code></p>
</li>
</ul>
<h2 id="change-all-values-of-a-facet">Change all values of a facet</h2>
<p>Complete the following steps to change all values of a facet:</p>
<ol>
<li>Access EdgeCmd utility through the command line.</li>
<li>Type the <code>set</code> keyword.</li>
<li>Add the <code>&lt;facetName&gt;</code>and <code>&lt;componentId&gt;</code>, replacing both with their respective values.</li>
<li><p>Add all key-value pairs. Then, press Enter.</p>
<pre><code class="lang-cmd">edgecmd set &lt;facetName&gt; -cid &lt;componentId&gt; -&lt;Key1&gt; &lt;Value1&gt; -&lt;Key2&gt; &lt;Value2&gt; -&lt;Key3&gt; &lt;Value3&gt;
</code></pre><p><strong>Example:</strong> Change all values in the &#39;Logging&#39; facet of the &#39;OpcUa1&#39; component:</p>
<pre><code class="lang-cmd">edgecmd set Logging -cid OpcUa1 -LogLevel Warning -LogFileSizeLimitBytes 5000 -LogFileCountLimit 30
</code></pre></li>
</ol>
<h3 id="linux-only-add-or-change-data-selection-items-containing-single-quotes">Linux only: Add or change data selection items containing single quotes</h3>
<p>For the following TextParser-based adapters, you must wrap the value of data selection items that contain single quotes within single quotes and escape those with a backslash:</p>
<ul>
<li>PI Adapter for Structured Data Files</li>
<li>PI Adapter for MQTT</li>
<li>PI Adapter for Azure Event Hubs  </li>
</ul>
<p>Instead of <code>$[&#39;Value1&#39;]</code>, type <code>&#39;$[&#39;\&#39;&#39;Value1&#39;\&#39;&#39;]&#39;</code>.</p>
<p><strong>Example:</strong></p>
<p><code>edgecmd add dataselection -cid MQTT1 -timefield &#39;$[&#39;\&#39;&#39;Timestamp&#39;\&#39;&#39;]&#39; -valuefield &#39;$[&#39;\&#39;&#39;Value&#39;\&#39;&#39;]&#39;</code></p>
<h2 id="configure-key-value-pairs-in-a-facet">Configure key-value pairs in a facet</h2>
<p>Complete the following steps to configure any number of valid key-value pairs in a facet:</p>
<ol>
<li>Access EdgeCmd utility through the command line.</li>
<li>Type the <code>edit</code> keyword and the <code>&lt;facetName&gt;</code>.</li>
<li>Add the <code>&lt;facetName&gt;</code>and <code>&lt;componentId&gt;</code>, replacing both with their respective values.</li>
<li><p>Add the key-value pairs you want to configure. Then, press Enter.</p>
<pre><code class="lang-cmd">edgecmd edit &lt;facetName&gt; -cid &lt;componentId&gt; -&lt;Key1&gt; &lt;Value1&gt;
</code></pre><p><strong>Example:</strong> Configure the &#39;LogFileCountLimit&#39; key in the &#39;Logging&#39; facet of the &#39;Modbus1&#39; component:</p>
<pre><code class="lang-cmd">edgecmd edit Logging -cid Modbus1 -LogFileCountLimit 15
</code></pre></li>
</ol>
<h2 id="add-an-entry-to-a-collection-configuration">Add an entry to a collection configuration</h2>
<p>Complete the following steps to add an entry to a collection configuration:</p>
<ol>
<li>Access EdgeCmd utility through the command line.</li>
<li>Type the <code>add</code> keyword and the <code>&lt;facetName&gt;</code>.</li>
<li>Add the <code>&lt;componentId&gt;</code>, replacing it with the ID of the component.</li>
<li><p>Add the key-value pairs. Then, press Enter.</p>
<pre><code class="lang-cmd">edgecmd add &lt;facetName&gt; -cid &lt;componentId&gt; -&lt;Key1&gt; &lt;Value1&gt; -&lt;Key2&gt; &lt;Value2&gt;
</code></pre><p><strong>Example:</strong> Add the &#39;Schedules&#39; facet to the &#39;Modbus1&#39; component:</p>
<pre><code class="lang-cmd">edgecmd add Schedules -cid Modbus1 -Id 2 -Period 00:00:30
</code></pre></li>
</ol>
<h2 id="configure-payload-port">Configure payload port</h2>
<p>EdgeCmd utility commands may include up to two port numbers. The first specified port number is always designated for the EdgeCmd application. The second port number is designated for the payload of the adapter or EDS.</p>
<p>Complete the following steps to edit the port number of the payload:</p>
<ol>
<li>Access EdgeCmd utility through the command line.</li>
<li>Type the <code>edit</code> and <code>datasource</code> keywords.</li>
<li>Add the first <code>&lt;port&gt;</code>, replacing it with the port number of the EdgeCmd application. The default is <code>5590</code>.</li>
<li>Add the <code>&lt;componentId&gt;</code>, replacing it with the ID of the component.</li>
<li><p>Add the second <code>&lt;port&gt;</code>, replacing it with the port number of the payload. Then, press Enter.</p>
<pre><code class="lang-cmd">edgecmd edit datasource -port 5590 -cid Mqtt1 -port 1885
</code></pre><p><strong>Note:</strong> <br></p>
<ul>
<li>If a payload port number is configured for a component and you specify only one port number in the data source command, you will receive the following error message: <code>Invalid arguments. Input arguments are required.</code></li>
<li>If you specify more than two port numbers, you will receive the following error message: <code>Duplicate optional argument: -port</code></li>
</ul>
</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edgecmd-Docs/blob/main/content/configuration/configure-an-adapter-or-eds-with-commands.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 2019 - 2021 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
